"use strict";require("@babel/polyfill");var locations,_loginAndLogout=require("./loginAndLogout"),_mapBox=require("./mapBox"),_updateSettings=require("./updateSettings"),DOM_Map=document.getElementById("map"),DOM_Login_Form=document.querySelector(".form--login"),DOM_Logout_btn=document.querySelector(".nav__el--logout"),DOM_Update_User_Info_Form=document.querySelector(".form-user-data"),DOM_Update_User_Password_Form=document.querySelector(".form-user-settings");DOM_Map&&(locations=JSON.parse(DOM_Map.dataset.locations),(0,_mapBox.displayMap)(locations)),DOM_Login_Form&&DOM_Login_Form.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("email").value,n=document.getElementById("password").value;(0,_loginAndLogout.loginActionAPI)(t,n)}),DOM_Logout_btn&&DOM_Logout_btn.addEventListener("click",function(){return(0,_loginAndLogout.logoutActionAPI)()}),DOM_Update_User_Info_Form&&DOM_Update_User_Info_Form.addEventListener("submit",function(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.querySelector(".btn--save-info").textContent="Updating...",(n=new FormData).append("name",document.getElementById("name").value),n.append("email",document.getElementById("email").value),n.append("photo",document.getElementById("photo").files[0]),e.next=8,regeneratorRuntime.awrap((0,_updateSettings.updateUserActionApi)("info",n));case 8:document.querySelector(".btn--save-info").textContent="Save settings";case 9:case"end":return e.stop()}})}),DOM_Update_User_Password_Form&&DOM_Update_User_Password_Form.addEventListener("submit",function(t){var n,o,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=document.getElementById("password-current").value,o=document.getElementById("password").value,r=document.getElementById("password-confirm").value,document.querySelector(".btn--save-password").textContent="Updating...",e.next=7,regeneratorRuntime.awrap((0,_updateSettings.updateUserActionApi)("password",{passwordCurrent:n,password:o,passwordConfirm:r}));case 7:document.querySelector(".btn--save-password").textContent="Save Password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value="";case 11:case"end":return e.stop()}})});